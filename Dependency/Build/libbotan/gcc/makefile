PlatformTarget = $(shell arch)
CFlags = -Wall -Wfatal-errors -I../../../libbotan/gcc_$(PlatformTarget)/build/include/ -I../../../libbotan/gcc_$(PlatformTarget)/build/include/external/ --std=c++11 -ldl -lrt
CC = g++ $(CFlags) -O3
Config = Release
debug ?= 0
ifeq ($(debug), 1)
	Config = Debug
	CC = g++ -g $(CFlags)
endif
Target = ../../../Binarys/$(Config)/$(PlatformTarget)/
TargetLibName = libbotan
ObjPath = $(Config)/$(PlatformTarget)
SrcPath = ../../../libbotan/src/lib
Sources = /asn1/alg_id.cpp
Sources += /asn1/asn1_alt_name.cpp
Sources += /asn1/asn1_attribute.cpp
Sources += /asn1/asn1_obj.cpp
Sources += /asn1/asn1_oid.cpp
Sources += /asn1/asn1_str.cpp
Sources += /asn1/asn1_time.cpp
Sources += /asn1/ber_dec.cpp
Sources += /asn1/der_enc.cpp
Sources += /asn1/oids.cpp
Sources += /asn1/x509_dn.cpp
Sources += /base/scan_name.cpp
Sources += /base/symkey.cpp
Sources += /block/aes/aes.cpp
Sources += /block/block_cipher.cpp
Sources += /block/blowfish/blowfish.cpp
Sources += /block/camellia/camellia.cpp
Sources += /block/cascade/cascade.cpp
Sources += /block/cast/cast128.cpp
Sources += /block/cast/cast256.cpp
Sources += /block/des/des.cpp
Sources += /block/des/des_tab.cpp
Sources += /block/des/desx.cpp
Sources += /block/gost_28147/gost_28147.cpp
Sources += /block/idea/idea.cpp
Sources += /block/kasumi/kasumi.cpp
Sources += /block/lion/lion.cpp
Sources += /block/misty1/misty1.cpp
Sources += /block/noekeon/noekeon.cpp
Sources += /block/noekeon/noekeon_simd/noekeon_simd.cpp
Sources += /block/seed/seed.cpp
Sources += /block/serpent/serpent.cpp
Sources += /block/serpent/serpent_simd/serpent_simd.cpp
Sources += /block/sm4/sm4.cpp
Sources += /block/threefish/threefish.cpp
Sources += /block/twofish/twofish.cpp
Sources += /block/twofish/twofish_tab.cpp
Sources += /block/xtea/xtea.cpp
Sources += /codec/base64/base64.cpp
Sources += /codec/hex/hex.cpp
Sources += /entropy/dev_random/dev_random.cpp
Sources += /entropy/entropy_srcs.cpp
Sources += /entropy/proc_walk/proc_walk.cpp
Sources += /ffi/ffi.cpp
Sources += /ffi/ffi_block.cpp
Sources += /ffi/ffi_cert.cpp
Sources += /ffi/ffi_cipher.cpp
Sources += /ffi/ffi_hash.cpp
Sources += /ffi/ffi_kdf.cpp
Sources += /ffi/ffi_keywrap.cpp
Sources += /ffi/ffi_mac.cpp
Sources += /ffi/ffi_mp.cpp
Sources += /ffi/ffi_pk_op.cpp
Sources += /ffi/ffi_pkey.cpp
Sources += /ffi/ffi_pkey_algs.cpp
Sources += /ffi/ffi_rng.cpp
Sources += /filters/algo_filt.cpp
Sources += /filters/basefilt.cpp
Sources += /filters/buf_filt.cpp
Sources += /filters/cipher_filter.cpp
Sources += /filters/codec_filt/b64_filt.cpp
Sources += /filters/codec_filt/hex_filt.cpp
Sources += /filters/comp_filter.cpp
Sources += /filters/data_snk.cpp
Sources += /filters/fd_unix/fd_unix.cpp
Sources += /filters/filter.cpp
Sources += /filters/key_filt.cpp
Sources += /filters/out_buf.cpp
Sources += /filters/pipe.cpp
Sources += /filters/pipe_io.cpp
Sources += /filters/pipe_rw.cpp
Sources += /filters/secqueue.cpp
Sources += /filters/threaded_fork.cpp
Sources += /hash/blake2/blake2b.cpp
Sources += /hash/checksum/adler32/adler32.cpp
Sources += /hash/checksum/crc24/crc24.cpp
Sources += /hash/checksum/crc32/crc32.cpp
Sources += /hash/comb4p/comb4p.cpp
Sources += /hash/gost_3411/gost_3411.cpp
Sources += /hash/hash.cpp
Sources += /hash/keccak/keccak.cpp
Sources += /hash/md4/md4.cpp
Sources += /hash/md5/md5.cpp
Sources += /hash/mdx_hash/mdx_hash.cpp
Sources += /hash/par_hash/par_hash.cpp
Sources += /hash/rmd160/rmd160.cpp
Sources += /hash/sha1/sha160.cpp
Sources += /hash/sha2_32/sha2_32.cpp
Sources += /hash/sha2_64/sha2_64.cpp
Sources += /hash/sha3/sha3.cpp
Sources += /hash/shake/shake.cpp
Sources += /hash/skein/skein_512.cpp
Sources += /hash/sm3/sm3.cpp
Sources += /hash/streebog/streebog-precalc.cpp
Sources += /hash/streebog/streebog.cpp
Sources += /hash/tiger/tig_tab.cpp
Sources += /hash/tiger/tiger.cpp
Sources += /hash/whirlpool/whirlpool.cpp
Sources += /hash/whirlpool/whrl_tab.cpp
Sources += /kdf/hkdf/hkdf.cpp
Sources += /kdf/kdf.cpp
Sources += /kdf/kdf1/kdf1.cpp
Sources += /kdf/kdf1_iso18033/kdf1_iso18033.cpp
Sources += /kdf/kdf2/kdf2.cpp
Sources += /kdf/prf_tls/prf_tls.cpp
Sources += /kdf/prf_x942/prf_x942.cpp
Sources += /kdf/sp800_108/sp800_108.cpp
Sources += /kdf/sp800_56a/sp800_56a.cpp
Sources += /kdf/sp800_56c/sp800_56c.cpp
Sources += /mac/cbc_mac/cbc_mac.cpp
Sources += /mac/cmac/cmac.cpp
Sources += /mac/gmac/gmac.cpp
Sources += /mac/hmac/hmac.cpp
Sources += /mac/mac.cpp
Sources += /mac/poly1305/poly1305.cpp
Sources += /mac/siphash/siphash.cpp
Sources += /mac/x919_mac/x919_mac.cpp
Sources += /math/bigint/big_code.cpp
Sources += /math/bigint/big_io.cpp
Sources += /math/bigint/big_ops2.cpp
Sources += /math/bigint/big_ops3.cpp
Sources += /math/bigint/big_rand.cpp
Sources += /math/bigint/bigint.cpp
Sources += /math/bigint/divide.cpp
Sources += /math/ec_gfp/curve_gfp.cpp
Sources += /math/ec_gfp/curve_nistp.cpp
Sources += /math/ec_gfp/point_gfp.cpp
Sources += /math/mp/mp_comba.cpp
Sources += /math/mp/mp_core.cpp
Sources += /math/mp/mp_karat.cpp
Sources += /math/mp/mp_monty.cpp
Sources += /math/numbertheory/dsa_gen.cpp
Sources += /math/numbertheory/jacobi.cpp
Sources += /math/numbertheory/make_prm.cpp
Sources += /math/numbertheory/mp_numth.cpp
Sources += /math/numbertheory/numthry.cpp
Sources += /math/numbertheory/pow_mod.cpp
Sources += /math/numbertheory/powm_fw.cpp
Sources += /math/numbertheory/powm_mnt.cpp
Sources += /math/numbertheory/primes.cpp
Sources += /math/numbertheory/reducer.cpp
Sources += /math/numbertheory/ressol.cpp
Sources += /misc/aont/package.cpp
Sources += /misc/cryptobox/cryptobox.cpp
Sources += /misc/fpe_fe1/fpe_fe1.cpp
Sources += /misc/hotp/hotp.cpp
Sources += /misc/hotp/totp.cpp
Sources += /misc/rfc3394/rfc3394.cpp
Sources += /misc/srp6/srp6.cpp
Sources += /misc/tss/tss.cpp
Sources += /modes/aead/aead.cpp
Sources += /modes/aead/ccm/ccm.cpp
Sources += /modes/aead/chacha20poly1305/chacha20poly1305.cpp
Sources += /modes/aead/eax/eax.cpp
Sources += /modes/aead/gcm/gcm.cpp
Sources += /modes/aead/ocb/ocb.cpp
Sources += /modes/aead/siv/siv.cpp
Sources += /modes/cbc/cbc.cpp
Sources += /modes/cfb/cfb.cpp
Sources += /modes/cipher_mode.cpp
Sources += /modes/mode_pad/mode_pad.cpp
Sources += /modes/xts/xts.cpp
Sources += /passhash/bcrypt/bcrypt.cpp
Sources += /passhash/passhash9/passhash9.cpp
Sources += /pbkdf/pbkdf.cpp
Sources += /pbkdf/pbkdf1/pbkdf1.cpp
Sources += /pbkdf/pbkdf2/pbkdf2.cpp
Sources += /pbkdf/pgp_s2k/pgp_s2k.cpp
Sources += /pk_pad/eme.cpp
Sources += /pk_pad/eme_oaep/oaep.cpp
Sources += /pk_pad/eme_pkcs1/eme_pkcs.cpp
Sources += /pk_pad/eme_raw/eme_raw.cpp
Sources += /pk_pad/emsa.cpp
Sources += /pk_pad/emsa1/emsa1.cpp
Sources += /pk_pad/emsa_pkcs1/emsa_pkcs1.cpp
Sources += /pk_pad/emsa_pssr/pssr.cpp
Sources += /pk_pad/emsa_raw/emsa_raw.cpp
Sources += /pk_pad/emsa_x931/emsa_x931.cpp
Sources += /pk_pad/hash_id/hash_id.cpp
Sources += /pk_pad/iso9796/iso9796.cpp
Sources += /pk_pad/mgf1/mgf1.cpp
Sources += /prov/pkcs11/p11.cpp
Sources += /prov/pkcs11/p11_ecc_key.cpp
Sources += /prov/pkcs11/p11_ecdh.cpp
Sources += /prov/pkcs11/p11_ecdsa.cpp
Sources += /prov/pkcs11/p11_mechanism.cpp
Sources += /prov/pkcs11/p11_module.cpp
Sources += /prov/pkcs11/p11_object.cpp
Sources += /prov/pkcs11/p11_randomgenerator.cpp
Sources += /prov/pkcs11/p11_rsa.cpp
Sources += /prov/pkcs11/p11_session.cpp
Sources += /prov/pkcs11/p11_slot.cpp
Sources += /prov/pkcs11/p11_x509.cpp
Sources += /pubkey/blinding.cpp
Sources += /pubkey/cecpq1/cecpq1.cpp
Sources += /pubkey/curve25519/curve25519.cpp
Sources += /pubkey/curve25519/donna.cpp
Sources += /pubkey/dh/dh.cpp
Sources += /pubkey/dl_algo/dl_algo.cpp
Sources += /pubkey/dl_group/dl_group.cpp
Sources += /pubkey/dl_group/dl_named.cpp
Sources += /pubkey/dlies/dlies.cpp
Sources += /pubkey/dsa/dsa.cpp
Sources += /pubkey/ec_group/ec_group.cpp
Sources += /pubkey/ec_group/ec_named.cpp
Sources += /pubkey/ecc_key/ecc_key.cpp
Sources += /pubkey/ecdh/ecdh.cpp
Sources += /pubkey/ecdsa/ecdsa.cpp
Sources += /pubkey/ecgdsa/ecgdsa.cpp
Sources += /pubkey/ecies/ecies.cpp
Sources += /pubkey/eckcdsa/eckcdsa.cpp
Sources += /pubkey/ed25519/ed25519.cpp
Sources += /pubkey/ed25519/ed25519_fe.cpp
Sources += /pubkey/ed25519/ed25519_key.cpp
Sources += /pubkey/ed25519/ge.cpp
Sources += /pubkey/ed25519/sc_muladd.cpp
Sources += /pubkey/ed25519/sc_reduce.cpp
Sources += /pubkey/elgamal/elgamal.cpp
Sources += /pubkey/gost_3410/gost_3410.cpp
Sources += /pubkey/keypair/keypair.cpp
Sources += /pubkey/mce/code_based_key_gen.cpp
Sources += /pubkey/mce/gf2m_rootfind_dcmp.cpp
Sources += /pubkey/mce/gf2m_small_m.cpp
Sources += /pubkey/mce/goppa_code.cpp
Sources += /pubkey/mce/mce_workfactor.cpp
Sources += /pubkey/mce/mceliece.cpp
Sources += /pubkey/mce/mceliece_key.cpp
Sources += /pubkey/mce/polyn_gf2m.cpp
Sources += /pubkey/mceies/mceies.cpp
Sources += /pubkey/newhope/newhope.cpp
Sources += /pubkey/pbes2/pbes2.cpp
Sources += /pubkey/pem/pem.cpp
Sources += /pubkey/pk_algs.cpp
Sources += /pubkey/pk_keys.cpp
Sources += /pubkey/pk_ops.cpp
Sources += /pubkey/pkcs8.cpp
Sources += /pubkey/pubkey.cpp
Sources += /pubkey/rfc6979/rfc6979.cpp
Sources += /pubkey/rsa/rsa.cpp
Sources += /pubkey/sm2/sm2.cpp
Sources += /pubkey/sm2/sm2_enc.cpp
Sources += /pubkey/workfactor.cpp
Sources += /pubkey/x509_key.cpp
Sources += /pubkey/xmss/xmss_common_ops.cpp
Sources += /pubkey/xmss/xmss_hash.cpp
Sources += /pubkey/xmss/xmss_index_registry.cpp
Sources += /pubkey/xmss/xmss_parameters.cpp
Sources += /pubkey/xmss/xmss_privatekey.cpp
Sources += /pubkey/xmss/xmss_publickey.cpp
Sources += /pubkey/xmss/xmss_signature.cpp
Sources += /pubkey/xmss/xmss_signature_operation.cpp
Sources += /pubkey/xmss/xmss_verification_operation.cpp
Sources += /pubkey/xmss/xmss_wots_common_ops.cpp
Sources += /pubkey/xmss/xmss_wots_parameters.cpp
Sources += /pubkey/xmss/xmss_wots_privatekey.cpp
Sources += /pubkey/xmss/xmss_wots_publickey.cpp
Sources += /pubkey/xmss/xmss_wots_signature_operation.cpp
Sources += /pubkey/xmss/xmss_wots_verification_operation.cpp
Sources += /rng/auto_rng/auto_rng.cpp
Sources += /rng/chacha_rng/chacha_rng.cpp
Sources += /rng/hmac_drbg/hmac_drbg.cpp
Sources += /rng/rng.cpp
Sources += /rng/stateful_rng/stateful_rng.cpp
Sources += /rng/system_rng/system_rng.cpp
Sources += /stream/chacha/chacha.cpp
Sources += /stream/ctr/ctr.cpp
Sources += /stream/ofb/ofb.cpp
Sources += /stream/rc4/rc4.cpp
Sources += /stream/salsa20/salsa20.cpp
Sources += /stream/shake_cipher/shake_cipher.cpp
Sources += /stream/stream_cipher.cpp
Sources += /tls/credentials_manager.cpp
Sources += /tls/msg_cert_req.cpp
Sources += /tls/msg_cert_status.cpp
Sources += /tls/msg_cert_verify.cpp
Sources += /tls/msg_certificate.cpp
Sources += /tls/msg_client_hello.cpp
Sources += /tls/msg_client_kex.cpp
Sources += /tls/msg_finished.cpp
Sources += /tls/msg_hello_verify.cpp
Sources += /tls/msg_server_hello.cpp
Sources += /tls/msg_server_kex.cpp
Sources += /tls/msg_session_ticket.cpp
Sources += /tls/sessions_sql/tls_session_manager_sql.cpp
Sources += /tls/tls_alert.cpp
Sources += /tls/tls_blocking.cpp
Sources += /tls/tls_callbacks.cpp
Sources += /tls/tls_cbc/tls_cbc.cpp
Sources += /tls/tls_channel.cpp
Sources += /tls/tls_ciphersuite.cpp
Sources += /tls/tls_client.cpp
Sources += /tls/tls_extensions.cpp
Sources += /tls/tls_handshake_hash.cpp
Sources += /tls/tls_handshake_io.cpp
Sources += /tls/tls_handshake_state.cpp
Sources += /tls/tls_policy.cpp
Sources += /tls/tls_record.cpp
Sources += /tls/tls_server.cpp
Sources += /tls/tls_session.cpp
Sources += /tls/tls_session_key.cpp
Sources += /tls/tls_session_manager_memory.cpp
Sources += /tls/tls_suite_info.cpp
Sources += /tls/tls_version.cpp
Sources += /utils/assert.cpp
Sources += /utils/barrier.cpp
Sources += /utils/calendar.cpp
Sources += /utils/charset.cpp
Sources += /utils/cpuid.cpp
Sources += /utils/data_src.cpp
Sources += /utils/dyn_load/dyn_load.cpp
Sources += /utils/filesystem.cpp
Sources += /utils/http_util/http_util.cpp
Sources += /utils/locking_allocator/locking_allocator.cpp
Sources += /utils/mem_ops.cpp
Sources += /utils/os_utils.cpp
Sources += /utils/parsing.cpp
Sources += /utils/read_cfg.cpp
Sources += /utils/semaphore.cpp
Sources += /utils/version.cpp
Sources += /x509/cert_status.cpp
Sources += /x509/certstor.cpp
Sources += /x509/certstor_sql/certstor_sql.cpp
Sources += /x509/crl_ent.cpp
Sources += /x509/datastor.cpp
Sources += /x509/key_constraint.cpp
Sources += /x509/name_constraint.cpp
Sources += /x509/ocsp.cpp
Sources += /x509/ocsp_types.cpp
Sources += /x509/pkcs10.cpp
Sources += /x509/x509_ca.cpp
Sources += /x509/x509_crl.cpp
Sources += /x509/x509_ext.cpp
Sources += /x509/x509_obj.cpp
Sources += /x509/x509cert.cpp
Sources += /x509/x509opt.cpp
Sources += /x509/x509path.cpp
Sources += /x509/x509self.cpp


T = $(Sources:.cpp=.o)
Objs = $(addprefix $(ObjPath),$(T))
all: Dirs $(Objs)
	ar crf $(Target)$(TargetLibName).a $(Objs)
Dirs:
	mkdir -p $(ObjPath)
	mkdir -p $(Target)
$(ObjPath)%.o: $(SrcPath)%.cpp
	mkdir -p $(dir $@)
	$(CC) -c  $(subst $(ObjPath),$(SrcPath), $(basename $@)).cpp -o $@
clean:
	rm -rf $(ObjPath)
	rm -f $(Target)$(TargetLibName).a
